"use strict";function Carousel(i){defaultopts={index:0,carousleTime:5e3},$.extend(this,$.extend(defaultopts,i)),this.timerId=null,this.init()}Carousel.prototype={constructor:Carousel,init:function(){this.renderDOM(),this.beindEvents()},renderDOM:function(){var e=this;this.$baseDomStr=$('<div id="js_slider" class="w-slider"><div class="slider-picture"><div class="slider-main" id="slider_main_block"></div></div><div class="slider-ctrl" id="slider_ctrl"></div></div>'),$.each(this.data,function(i,t){e.addPicture(t.href,t.img)}),this.addCircle(),$(this.parentDom).append(this.$baseDomStr),this.addStyle()},beindEvents:function(){var i=this,t=this.index;this.autoPlay(t+1),$(".slider-ctrl-con").eq(t).addClass("slider-ctrl-con-active"),$(".slider-main-img").eq(t).css("opacity",1).siblings().css("opacity",0),$(".slider-ctrl-con").on("mouseenter",function(){clearInterval(i.timerId),t=$(this).index(),i.changePicture(t)()}).on("mouseleave",function(){i.autoPlay(t+1)}),this.mobileSwipe()},addPicture:function(i,t){var e='<div class="slider-main-img"><a href="[[href]]"><img src="[[src]]" alt=""/></a></div>'.replace("[[href]]",i).replace("[[src]]",t);this.$baseDomStr.find(".slider-main").append(e)},addCircle:function(){var i=this;$.each(this.data,function(){i.$baseDomStr.find("#slider_ctrl").append($("<span class='slider-ctrl-con'></span>"))})},autoPlay:function(i){var t=this,i=i;t.timerId=setInterval(function(){i=t.changePicture(i)(),i++},this.carousleTime)},changePicture:function(i){return function(){return i>$(".slider-main-img").length-1&&(i=0),i<0&&(i=$(".slider-main-img").length-1),$(".slider-main-img").eq(i).stop().animate({opacity:1},800).siblings().stop().animate({opacity:0},700),$(".slider-ctrl-con").removeClass("slider-ctrl-con-active").eq(i).addClass("slider-ctrl-con-active"),i}},mobileSwipe:function(){var t,e,n=this,s=0,r=0,i=$(".w-slider")[0];i.addEventListener("touchstart",function(i){$(".slider-ctrl-con").off("mouseenter mouseleave"),clearInterval(n.timerId),t=i.touches[0].clientX,s=$(".slider-ctrl-con-active").index()}),i.addEventListener("touchmove",function(i){e=i.touches[0].clientX,r=e-t}),i.addEventListener("touchend",function(){10<Math.abs(r)&&(n.changePicture(0<r?--s:++s)(),n.autoPlay(+s+1)),$(".slider-ctrl-con").on("click",function(){clearInterval(n.timerId),s=$(this).index(),n.changePicture(s)(),n.autoPlay(s)}),r=0})},addStyle:function(){var i=this,t=$(".slider-main-img img");t[0].onload=function(){i.imgWidth?(t.width(i.imgWidth),$(i.parentDom).width(i.imgWidth)):$(i.parentDom).width($(this).width()),$(i.parentDom).height($(this).height())}}};